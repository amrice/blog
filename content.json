{"meta":{"title":"Eyte","subtitle":"","description":"","author":"John Doe","url":"https://nostses.com","root":"/"},"pages":[{"title":"","date":"2021-06-20T05:56:21.236Z","updated":"2021-06-20T05:56:21.236Z","comments":true,"path":"sw.js","permalink":"https://nostses.com/sw.js","excerpt":"","text":"importScripts('https://cdn.jsdelivr.net/npm/workbox-cdn@5.1.3/workbox/workbox-sw.js'); workbox.setConfig({ modulePathPrefix: 'https://cdn.jsdelivr.net/npm/workbox-cdn@5.1.3/workbox/' }); const { core, precaching, routing, strategies, expiration, cacheableResponse, backgroundSync } = workbox; const { CacheFirst, NetworkFirst, NetworkOnly, StaleWhileRevalidate } = strategies; const { ExpirationPlugin } = expiration; const { CacheableResponsePlugin } = cacheableResponse; const cacheSuffixVersion = '-000010', // 缓存版本号 极端重要，修改静态文件后发布网页一定要修改缓存版本号 maxEntries = 100; self.addEventListener('activate', (event) => { event.waitUntil( caches.keys().then((keys) => { return Promise.all(keys.map((key) => { if (!key.includes(cacheSuffixVersion)) return caches.delete(key); })); }) ); }); core.setCacheNameDetails({ prefix: 'volantis', // 极端重要 自己拟定一个名字 suffix: cacheSuffixVersion }); core.skipWaiting(); core.clientsClaim(); precaching.cleanupOutdatedCaches(); /* * Precache * - Static Assets */ precaching.precacheAndRoute( // 极端重要 定义首次缓存的静态文件 如果开启CDN需要修改为CDN链接 [ { url: '/css/first.css', revision: null }, { url: '/css/style.css', revision: null }, { url: '/js/app.js', revision: null }, ], ); /* * Cache File From CDN * * Method: CacheFirst * cacheName: static-immutable * cacheTime: 30d */ // cdn.jsdelivr.net - cors enabled routing.registerRoute( /.*cdn\\.jsdelivr\\.net/, new CacheFirst({ cacheName: 'static-immutable' + cacheSuffixVersion, fetchOptions: { mode: 'cors', credentials: 'omit' }, plugins: [ new ExpirationPlugin({ maxAgeSeconds: 30 * 24 * 60 * 60, purgeOnQuotaError: true }) ] }) ); // m7.music.126.net - cors enabled routing.registerRoute( /.*m7\\.music\\.126\\.net/, new CacheFirst({ cacheName: 'static-immutable' + cacheSuffixVersion, fetchOptions: { mode: 'cors', credentials: 'omit' }, plugins: [ new ExpirationPlugin({ maxAgeSeconds: 30 * 24 * 60 * 60, purgeOnQuotaError: true }) ] }) ); /* * No Cache * * Method: networkOnly */ routing.registerRoute( /.*baidu\\.com.*/, new NetworkOnly() ); /* * Others img fonts * Method: staleWhileRevalidate */ routing.registerRoute( // Cache image fonts files /.*\\.(?:png|jpg|jpeg|svg|gif|webp|ico|eot|ttf|woff|woff2|mp3)/, new StaleWhileRevalidate() ); /* * Static Assets * Method: staleWhileRevalidate */ routing.registerRoute( // Cache CSS files /.*\\.(css|js)/, // Use cache but update in the background ASAP new StaleWhileRevalidate() ); /* * sw.js - Revalidate every time * staleWhileRevalidate */ routing.registerRoute( '/sw.js', // 本文件名 new StaleWhileRevalidate() ); /* * Default - Serve as it is * networkFirst */ routing.setDefaultHandler( new NetworkFirst({ networkTimeoutSeconds: 3 }) );"},{"title":"photos","date":"2021-06-20T07:20:42.000Z","updated":"2021-06-20T07:21:47.174Z","comments":false,"path":"photos/index.html","permalink":"https://nostses.com/photos/index.html","excerpt":"","text":""},{"title":"","date":"2021-06-20T07:27:05.759Z","updated":"2021-06-20T07:27:05.759Z","comments":true,"path":"photos/photos.json","permalink":"https://nostses.com/photos/photos.json","excerpt":"","text":"[{\"name\":\"pictures\",\"children\":[\"2076.1466 Git命令表.jpg\"]}]"},{"title":"","date":"2021-06-20T07:27:05.759Z","updated":"2021-06-20T07:27:05.759Z","comments":true,"path":"photos/photosInfo.json","permalink":"https://nostses.com/photos/photosInfo.json","excerpt":"","text":"[{\"dirName\":\"pictures\",\"fileName\":\"Git命令表.jpg\",\"iconID\":\"2076.1466 Git命令表.jpg\",\"extension\":{\"size\":64,\"offset\":[0,0]}}]"},{"title":"bb","date":"2021-06-19T17:30:51.000Z","updated":"2021-06-20T05:43:23.413Z","comments":true,"path":"bb/index.html","permalink":"https://nostses.com/bb/index.html","excerpt":"","text":""}],"posts":[{"title":"HelloWorld","slug":"HelloWorld","date":"2021-06-19T14:37:00.000Z","updated":"2021-06-19T14:38:43.507Z","comments":true,"path":"2021/06/19/HelloWorld/","link":"","permalink":"https://nostses.com/2021/06/19/HelloWorld/","excerpt":"","text":"See you tomorrow","categories":[],"tags":[]}],"categories":[],"tags":[]}